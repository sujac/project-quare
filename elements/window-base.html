<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="window-base" attributes="height width">
    <template>
        <link rel="stylesheet" href="window-base.css">
        <div id="box">
            <div class="resizer" id="resizer-top" on-track="{{trackTop}}"></div>
            <div class="resizer" id="resizer-left" on-track="{{trackLeft}}"></div>
            <div class="resizer" id="resizer-bottom" on-track="{{trackBottom}}"></div>
            <div class="resizer" id="resizer-right" on-track="{{trackRight}}"></div>
            <div class="resizer" id="right-diagonal" on-track="{{trackRightDiagonal}}"></div>
            <div class="resizer" id="left-diagonal" on-track="{{trackLeftDiagonal}}"></div>
            <header id="header" on-track="{{trackDraggable}}"></header>
        </div>
    </template>
    <script>
        Polymer('window-base', {
            height: 400,
            width: 500,
            left: 400,
            top: 100,
            observe: {
                left: 'positionChanged',
                top: 'positionChanged'
            },
            ready: function () {
                this.heightChanged();
                this.widthChanged();
                this.positionChanged();
            },
            heightChanged: function () {
                this.$.box.style.height = this.height + 'px';
            },
            widthChanged: function () {
                this.$.box.style.width = this.width + 'px';
            },
            positionChanged: function () {
                var s = this.style;
                var translate = "translate(" + this.left + "px, " + this.top + "px)";
                s.webkitTransform = s.mozTransform = s.msTransform = s.transform = translate;
            },
            trackRight: function (event, detail, sender) {
                this.width = event.clientX - this.left;
            },
            trackLeft: function (event, detail, sender) {
                this.width = this.width - (event.clientX - this.left);
                this.left = event.clientX;
            },
            trackBottom: function (event, detail, sender) {
                this.height = event.clientY - this.top;
            },
            trackTop: function (event, detail, sender) {
                this.height = this.height - (event.clientY - this.top);
                this.top = event.clientY;
            },
            trackRightDiagonal: function (event, detail, sender) {
                this.width = event.clientX - this.left;
                this.height = event.clientY - this.top;
            },
            trackLeftDiagonal: function (event, detail, sender) {
                this.width = this.width - event.clientX;
                this.height = (this.height + this.top) - (event.clientY - this.top);
            },
            trackDraggable: function (event, detail, sender) {
                this.top = event.clientY;
                this.left = event.clientX;
            }
        });
    </script>
</polymer-element>
