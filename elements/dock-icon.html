<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="window-base.html">

<polymer-element name="dock-icon" attributes="name" on-click="{{click}}">
    <template>
        <polymer-signals on-polymer-signal-closed="{{updateIcon}}"></polymer-signals>
        <link rel="stylesheet" href="dock-icon.css">
        <div id="box"></div>
    </template>
    <script>
        Polymer('dock-icon', {
            name: "",
            open: false,
            ready: function () {
                this.assignIcon();
            },
            assignIcon: function () {
                this.$.box.style.backgroundImage = "url(img/" + this.name + ".png)";
            },
            click: function (event, detail, sender) {
                if (!this.open) {
                    var container = document.getElementsByTagName("window-container")[0];
                    var window = document.createElement("window-base");
                    window.setAttribute("name", this.name);
                    container.appendChild(window);
                    this.open = true;
                }
            },
            updateIcon: function (event, detail, sender) {                
                this.name == detail ? this.open = false : "";
            }
        });
    </script>
</polymer-element>