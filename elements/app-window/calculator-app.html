<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="calculator-app" attributes="options">
    <template>
        <polymer-signals on-polymer-signal-calculator="{{menuShare}}"></polymer-signals>
        <link rel="stylesheet" href="calculator-app.css">
        <div id="result">
            <p id="operations">{{operations}}</p>
            <p id="resultat">{{result}}</p>
        </div>
        <table class="content">
            <tr>
                <td on-click="{{buttonPressed}}">C</td>
                <td on-click="{{buttonPressed}}">`</td>
                <td on-click="{{buttonPressed}}">%</td>
                <td on-click="{{buttonPressed}}">*</td>
            </tr>
            <tr>
                <td on-click="{{buttonPressed}}">7</td>
                <td on-click="{{buttonPressed}}">8</td>
                <td on-click="{{buttonPressed}}">9</td>
                <td on-click="{{buttonPressed}}">X</td>
            </tr>
        </table>
        <!--
        <section class="content">
            <div class="row">
                <div class="button-number" on-click="{{buttonPressed}}">C</div>
                <div class="button-number" on-click="{{buttonPressed}}"></div>
                <div class="button-number" on-click="{{buttonPressed}}">%</div>
                <div class="button-number">*</div>
            </div>
            <div class="row">
                <div class="button-number" on-click="{{buttonPressed}}">7</div>
                <div class="button-number" on-click="{{buttonPressed}}">8</div>
                <div class="button-number" on-click="{{buttonPressed}}">9</div>
                <div class="button-number" on-click="{{buttonPressed}}">x</div>
            </div>
            <div class="row">
                <div class="button-number" on-click="{{buttonPressed}}">4</div>
                <div class="button-number" on-click="{{buttonPressed}}">5</div>
                <div class="button-number" on-click="{{buttonPressed}}">6</div>
                <div class="button-number" on-click="{{buttonPressed}}">-</div>
            </div>
            <div class="row">
                <div class="button-number" on-click="{{buttonPressed}}">1</div>
                <div class="button-number" on-click="{{buttonPressed}}">2</div>
                <div class="button-number" on-click="{{buttonPressed}}">3</div>
                <div class="button-number" on-click="{{buttonPressed}}">+</div>
            </div>
            <div class="row">
                <div class="button-number half-width" on-click="{{buttonPressed}}">0</div>
                <div class="button-number" on-click="{{buttonPressed}}">.</div>
                <div class="button-number" id="rest" on-click="{{buttonPressed}}">=</div>
            </div>
        </section>
-->
    </template>
    <script>
        Polymer('calculator-app', {
            menu: ["Calculator", "File", "Edit", "View", "Window", "Help"],
            options: {
                "top": 200,
                "left": 450,
                "width": 320,
                "height": 500
            },
            operations: "",
            result: 0,
            domReady: function () {
                this.menuShare();
            },
            attached: function () {
                this.async(function () {
                    this.parentNode.accesChild(this);
                });
            },
            menuShare: function () {
                this.fire('polymer-signal', {
                    name: "menu",
                    data: this.menu
                });
            },
            getOptions: function () {
                return this.options;
            },
            buttonPressed: function (event, detail, sender) {
                (sender.id == "rest") ? this.calculate() : this.operations += event.target.textContent;
            },
            calculate: function () {
                this.$.resultat.innerHTML = eval(this.$.operations.textContent);
            }
        });
    </script>
</polymer-element>