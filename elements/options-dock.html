<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="polymer-signals.html">
<polymer-element name="options-dock" attributes="left top" on-mouseover="{{hover}}" on-mouseout="{{resetInterval}}">
    <template>
        <link rel="stylesheet" href="options-dock.css">
        <p on-click="{{leftDock}}">Dock position: Left</p>
        <p on-click="{{rightDock}}">Dock position: Right</p>
        <p on-click="{{bottomDock}}">Dock position: Bottom</p>
    </template>
    <script>
        Polymer('options-dock', {
            left: 0,
            top: 0,
            observe: {
                left: 'positionChanged',
                top: 'positionChanged'
            },
            domReady: function () {
                this.interval = setTimeout(this.deleteElement.bind(this), 3000);
            },
            positionChanged: function () {
                var s = this.style;
                var translate = "translate(" + this.left + "px, " + this.top + "px)";
                s.webkitTransform = s.mozTransform = s.msTransform = s.transform = translate;
            },
            leftDock: function () {
                this.fire('polymer-signal', {
                    name: "position",
                    data: "left"
                });
                this.deleteElement();
            },
            rightDock: function () {
                this.fire('polymer-signal', {
                    name: "position",
                    data: "right"
                });
                this.deleteElement();
            },
            bottomDock: function () {
                this.fire('polymer-signal', {
                    name: "position",
                    data: "bottom"
                });
                this.deleteElement();
            },
            deleteElement: function () {
                this.remove();
            },
            hover: function () {
                clearTimeout(this.interval);
            },
            resetInterval: function () {
                this.interval = setTimeout(this.deleteElement.bind(this), 1000);
            }
        });
    </script>
</polymer-element>